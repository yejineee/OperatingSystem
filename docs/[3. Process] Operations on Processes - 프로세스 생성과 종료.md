

# [3. Process] Operations on Processes - í”„ë¡œì„¸ìŠ¤ ìƒì„±ê³¼ ì¢…ë£Œ 

## ğŸ¥¨ í”„ë¡œì„¸ìŠ¤ ìƒì„±

- a Tree of Processes in Linux

![](https://i.imgur.com/qiFETK4.png)

### âœ”ï¸ íŠ¸ë¦¬ êµ¬ì¡°ì˜ í”„ë¡œì„¸ìŠ¤

ì‹¤í–‰í•˜ëŠ” ë™ì•ˆ, í”„ë¡œì„¸ìŠ¤ëŠ” ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤. 

í”„ë¡œì„¸ìŠ¤ê°€ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•˜ë©´, ê·¸ ê´€ê³„ëŠ” **ë¶€ëª¨(parent) í”„ë¡œì„¸ìŠ¤**ì™€ **ìì‹(child) í”„ë¡œì„¸ìŠ¤**ê´€ê³„ê°€ ëœë‹¤. 

ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹í”„ë¡œì„¸ìŠ¤ì—ê²Œ subtaskë¥¼ í• ë‹¹ì‹œí‚¤ê³ , wait()ìœ¼ë¡œ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ëë‚˜ê¸°ë¥¼ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆë‹¤.

ìì‹ í”„ë¡œì„¸ìŠ¤ ë˜í•œ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ë§Œë“¤ ìˆ˜ ìˆë‹¤. 

ê²°êµ­ í”„ë¡œì„¸ìŠ¤ì˜ ê´€ê³„ëŠ” **íŠ¸ë¦¬ êµ¬ì¡°**ë¥¼ ë§Œë“¤ê²Œ ëœë‹¤. 

### âœ”ï¸ PID

ê° í”„ë¡œì„¸ìŠ¤ëŠ” process identifier, ì¤„ì—¬ì„œ **PID**ë¼ê³  ë¶ˆë¦¬ëŠ” ê³ ìœ í•œ ê°’ì„ ê°–ê³  ìˆë‹¤. 

ì´ ê°’ì€ ì»¤ë„ì—ì„œ í”„ë¡œì„¸ìŠ¤ì˜ ì†ì„±ì— ì ‘ê·¼í•  ë•Œ ì‚¬ìš©í•  indexë¡œ ì‚¬ìš©ëœë‹¤.

### âœ”ï¸ init process

init í”„ë¡œì„¸ìŠ¤ëŠ” íŠ¸ë¦¬ì˜ ë£¨íŠ¸ë¡œì„œ, ëª¨ë“  ìœ ì € í”„ë¡œì„¸ìŠ¤ì˜ ì§ê°„ì ‘ì ìœ¼ë¡œ ë¶€ëª¨ê°€ ëœë‹¤. 

ì´ í”„ë¡œì„¸ìŠ¤ëŠ” ëª¨ë“  ê³ ì•„ í”„ë¡œì„¸ìŠ¤(orphan process)ì˜ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ëœë‹¤.

init processëŠ” ì£¼ê¸°ì ìœ¼ë¡œ`wait()` ì‹œìŠ¤í…œ ì½œì„ í˜¸ì¶œí•˜ì—¬ ì¢…ë£Œëœ ê³ ì•„ í”„ë¡œì„¸ìŠ¤ê°€ ê°–ê³  ìˆë˜ ìì›ì„ í•´ì œí•˜ëŠ” ì‘ì—…ì„ í•œë‹¤. ì¦‰, PIDì™€ process tableì˜ entryë¥¼ í•´ì œí•œë‹¤.

init processëŠ” ì´ì œ systemd í”„ë¡œì„¸ìŠ¤ê°€ ê·¸ ì—­í• ì„ í•œë‹¤.

![](https://i.imgur.com/DMeHdP0.png)


### âœ”ï¸ í”„ë¡œì„¸ìŠ¤ ìƒì„±ê³¼ ìì› í• ë‹¹

ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë˜ë©´, ì¼ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ cpu time, ë©”ëª¨ë¦¬, íŒŒì¼, I/O ì¥ì¹˜ì™€ ê°™ì€ ìì›(resource)ì´ í•„ìš”í•˜ë‹¤. 

ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ì´ëŸ¬í•œ ìì›ì„ 

1. ìš´ì˜ì²´ì œë¡œ ë¶€í„° ì§ì ‘ ì–»ê±°ë‚˜,

2. ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ ìì›ì˜ ì¼ë¶€ë¶„(subset)ì„ ê°–ëŠ” ê²ƒìœ¼ë¡œ ì œí•œëœë‹¤.

ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” 

1. ìì‹ í”„ë¡œì„¸ìŠ¤ë“¤ê³¼ ìì›ì„ êµ¬ë¶„(partition)í•˜ê±°ë‚˜,

2. ë©”ëª¨ë¦¬ë‚˜ íŒŒì¼ê³¼ ê°™ì€ ìì›ë“¤ì„ ê³µìœ (share)í•´ì•¼ í•œë‹¤. 

ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì˜ ìì› ì¤‘ ì¼ë¶€ë¶„ë§Œ ê°–ë„ë¡ ì œí•œí•¨ìœ¼ë¡œì¨, ë„ˆë¬´ ë§ì€ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ìƒê¹€ìœ¼ë¡œ ì¸í•˜ì—¬ ìƒê¸°ëŠ” ì‹œìŠ¤í…œì˜ ì˜¤ë²„ë¡œë”©ì„ ë§‰ëŠ”ë‹¤.

### âœ”ï¸ í”„ë¡œì„¸ìŠ¤ ìƒì„±ê³¼ ì‹¤í–‰

ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë˜ë©´, ë¶€ëª¨ì™€ ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ì€ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤.

1. ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ì™€ concurrentí•˜ê²Œ ì‹¤í–‰ëœë‹¤.

2. ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ ì¤‘ ì¼ë¶€ë‚˜ ì „ì²´ê°€ ì¢…ë£Œí•˜ê¸°ë¥¼ ê¸°ë‹¤ë¦°ë‹¤.(wait)

### âœ”ï¸ í”„ë¡œì„¸ìŠ¤ ìƒì„±ê³¼ ë©”ëª¨ë¦¬ ì˜ì—­

í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë˜ë©´ ë©”ëª¨ë¦¬ ì˜ì—­ì€ ë‘ ê°€ì§€ë¡œ ë‚˜ë‰˜ê²Œ ëœë‹¤.

1. ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì˜ ë³µì œë³¸ì„ ê°–ëŠ”ë‹¤. 
	
	=> ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì™€ ê°™ì€ í”„ë¡œê·¸ë¨ê³¼ ë°ì´í„°ë¥¼ ê°–ëŠ”ë‹¤.

2. ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ìƒˆë¡œìš´ í”„ë¡œê·¸ë¨ì„ ë©”ëª¨ë¦¬ì— ì˜¬ë¦°ë‹¤. 
	
### âœ”ï¸ UNIX ìš´ì˜ì²´ì œì—ì„œì˜ í”„ë¡œì„¸ìŠ¤ ìƒì„±

![](https://i.imgur.com/0ZxFY4B.png)


- í”„ë¡œì„¸ìŠ¤ ìƒì„± 

	UNIX í”„ë¡œì„¸ìŠ¤ì—ì„œëŠ” **`fork()`** ì‹œìŠ¤í…œ ì½œë¡œ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ë¥¼ ìƒì„±í•  ìˆ˜ ìˆë‹¤.

	ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ì€ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ê³¼ ë‹¤ë¥´ë‹¤.
	
	ê·¸ëŸ¬ë‚˜ ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì´ˆê¸° ë©”ëª¨ë¦¬ ì˜ì—­ì€ **ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ fork() í–ˆì„ ì‹œì ì˜ ë©”ëª¨ë¦¬ ì˜ì—­ê³¼ ê°™ì€ ë‚´ìš©**ì´ë‹¤.

	ì´ëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ìì‹ í”„ë¡œì„¸ìŠ¤ì™€ ì‰½ê²Œ ì†Œí†µí•  ìˆ˜ ìˆê²Œ í•œë‹¤.
	
	ë¶€ëª¨ì™€ ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” fork()ì´í›„ ì‹œì ë¶€í„° ê°ì ê³„ì†í•´ì„œ ì‹¤í–‰ëœë‹¤. 

	`fork()`ì˜ ë¦¬í„´ ì½”ë“œê°€ 0ì´ë©´ ìì‹ í”„ë¡œì„¸ìŠ¤ì´ê³ , 0ì´ ì•„ë‹ˆë©´ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ì´ë©°, ì´ ë•Œ ë¦¬í„´ì½”ë“œëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ PIDì´ë‹¤. -1ì´ë©´ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ê°€ ìƒì„±ë˜ì§€ ì•Šì€ ê²ƒì´ë‹¤.

- ë©”ëª¨ë¦¬ ë®ì–´ ì”Œìš°ê¸°

	`fork()` ì´í›„ë¡œ ë‘ í”„ë¡œì„¸ìŠ¤ ì¤‘ í•˜ë‚˜ëŠ” ì¼ë°˜ì ìœ¼ë¡œ **`exec()`** ì‹œìŠ¤í…œ ì½œì„ í˜¸ì¶œí•œë‹¤.
	
	`exec()`ëŠ” ê¸°ì¡´ì˜ í”„ë¡œì„¸ìŠ¤ ì´ë¯¸ì§€ë¥¼ ìƒˆë¡œìš´ í”„ë¡œì„¸ìŠ¤ ì´ë¯¸ì§€ë¡œ ë°”ê¾¸ê³ , ê·¸ê²ƒì„ ì‹¤í–‰í•œë‹¤.
	
- ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì¢…ë£Œ ê¸°ë‹¤ë¦¬ê¸°

	ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ë  ë™ì•ˆ, **`wait()`** ì‹œìŠ¤í…œ ì½œì„ í˜¸ì¶œí•˜ì—¬, ìì‹ ì€ ë ˆë””íì— ë“¤ì–´ê°ˆ ìˆ˜ ìˆë‹¤. 
	
	ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´, ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” `wait()`ì„ í˜¸ì¶œí•œ ì´í›„ë¶€í„° ë‹¤ì‹œ ì‹¤í–‰í•˜ê²Œ ëœë‹¤.

	ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ì¢…ë£Œë˜ë©´ **zombie process**ê°€ ëœë‹¤.
	
	ì´ ë•Œ, ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ê°–ê³  ìˆë˜ ìì›ë“¤(ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬, ê°€ìƒ ë©”ëª¨ë¦¬, open file, I/O buffer ë“±)ì€ í•´ì œëœë‹¤. 
	
	ê·¸ëŸ¬ë‚˜, PIDì™€ process tableì—ì„œì˜ entryëŠ” í•´ì œë˜ì§€ ì•ŠëŠ”ë‹¤. 
	
	ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ `wait()`ì„ í˜¸ì¶œí•˜ì˜€ì„ ë•Œ, ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ PIDì™€ process tableì—ì„œì˜ entryê°€ í•´ì œëœë‹¤. 
	

## ğŸ¥¨ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ

í”„ë¡œì„¸ìŠ¤ê°€ ì‹¤í–‰ì„ ë§ˆì³¤ì„ ë•ŒëŠ” ë‘ ê°€ì§€ ë°©ë²•ìœ¼ë¡œ ì¢…ë£Œë  ìˆ˜ ìˆë‹¤.

ì§ì ‘ì ìœ¼ë¡œëŠ” **`exit()`** ì‹œìŠ¤í…œ ì½œì„ í˜¸ì¶œí•˜ì—¬ OSì—ê²Œ ì¢…ë£Œë˜ì—ˆìŒì„ ì•Œë¦°ë‹¤.

ê°„ì ‘ì ìœ¼ë¡œëŠ” **main()ì—ì„œ return**ì„ í•˜ëŠ” ê²ƒì´ë‹¤.

### âœ”ï¸ exit() system call

í”„ë¡œì„¸ìŠ¤ëŠ” ì¢…ë£Œë˜ëŠ” ì‹œì ì— í”„ë¡œì„¸ìŠ¤ê°€ ê°–ê³  ìˆë˜ ìì›ë“¤ì€(ë¬¼ë¦¬, ê°€ìƒ ë©”ëª¨ë¦¬, open file, I/O buffer) í•´ì œëœë‹¤.

í”„ë¡œì„¸ìŠ¤ëŠ” ì¢…ë£Œë  ë•Œ, exit statusë¥¼ íŒŒë¼ë¯¸í„°ë¡œ ê±´ë„¤ì£¼ê³  ì¢…ë£Œí•  ìˆ˜ ìˆë‹¤.

```c
exit(1);
```

ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” `wait()` ì‹œìŠ¤í…œ ì½œì— íŒŒë¼ë¯¸í„°ë¥¼ ì „ë‹¬í•˜ì—¬, ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ exit statusë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤. 

ë˜í•œ, wait()ì˜ ë¦¬í„´ê°’ì€ ì¢…ë£Œëœ ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ PIDì´ë‹¤. 

ì´ë¥¼ í†µí•´ ì–´ë–¤ ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ì—ˆëŠ”ì§€ë¥¼ ì•Œ ìˆ˜ ìˆë‹¤.

```c
pid_t pid;
int status;

pid = wait(&status);
```

### âœ”ï¸ abort() system call

ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ëŠ” ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì‹¤í–‰ì„ abort() ì‹œìŠ¤í…œ ì½œë¡œ ì¢…ë£Œì‹œí‚¬ ìˆ˜ ìˆë‹¤.

ê·¸ ì´ìœ ë¡œëŠ” 

1. ìì‹ í”„ë¡œì„¸ìŠ¤ê°€ ë„ˆë¬´ ë§ì€ ìì›ì„ ì¡ì•„ë¨¹ì„ ë•Œ

2. ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ taskê°€ ë”ì´ìƒ í•„ìš” ì—†ì„ ë•Œ

3. ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ exití•œë‹¤ë©´, OSëŠ” ë¶€ëª¨í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ê¸° ì „ì— ìì‹ í”„ë¡œì„¸ìŠ¤ë“¤ì„ ì¢…ë£Œì‹œí‚¨ë‹¤. 
	- ì´ë¥¼ **Cascading termination**ì´ë¼ê³  í•œë‹¤. ì¦‰, OSëŠ” ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ì¢…ë£Œë˜ë©´, ê·¸ì˜ ëª¨ë“  ìì‹ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¢…ë£Œì‹œí‚¨ë‹¤. 

### âœ”ï¸ ì¢€ë¹„ í”„ë¡œì„¸ìŠ¤ (zombie process)

> On Unix and Unix-like computer operating systems, a zombie process or defunct process is **a process that has completed execution (via the exit system call) but still has an entry in the process table**: it is a process in the "Terminated state". - Wikipedia 

ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ì¢…ë£Œëœ ì‹œì ì— zombie stateì— ë“¤ì–´ê°„ë‹¤. 

ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ wait()ì„ í˜¸ì¶œí•œ ì‹œì ì— PIDì™€ process tableì˜ entryê°€ í•´ì œëœë‹¤.

ë§Œì•½ **ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ ìì‹ í”„ë¡œì„¸ìŠ¤ì˜ ì¢…ë£Œë˜ì—ˆëŠ”ë°ë„ wait()ì„ í˜¸ì¶œí•˜ì§€ ì•Šìœ¼ë©´, ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” ê·¸ëŒ€ë¡œ zombie process**ë¡œ ë‚¨ì•„ìˆë‹¤.

### âœ”ï¸ ê³ ì•„ í”„ë¡œì„¸ìŠ¤ (orphan process)

ë§Œì•½ **ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ê°€ wait()ì„ í˜¸ì¶œí•˜ì§€ ì•Šê³  ì¢…ë£Œ**í•´ë²„ë¦¬ë©´, ê·¸ ìì‹ í”„ë¡œì„¸ìŠ¤ëŠ” **ê³ ì•„ í”„ë¡œì„¸ìŠ¤**ê°€ ëœë‹¤. 

ìœ ë‹‰ìŠ¤ì™€ ë¦¬ëˆ…ìŠ¤ì—ì„œëŠ” ì´ ê²½ìš°ì— *init* processë¥¼ ê³ ì•„ í”„ë¡œì„¸ìŠ¤ì˜ ë¶€ëª¨ í”„ë¡œì„¸ìŠ¤ë¡œ ì§€ì •í•œë‹¤.

init processëŠ” ì£¼ê¸°ì ìœ¼ë¡œ wait()ì„ í˜¸ì¶œí•˜ì—¬, ì¢…ë£Œëœ ê³ ì•„ í”„ë¡œì„¸ìŠ¤ì˜ exit statusë¥¼ ìˆ˜ì§‘í•˜ê³ , ê·¸ì˜ ìì›(PID, process-table entry)ë¥¼ í•´ì œí•œë‹¤.
